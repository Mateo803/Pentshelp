import subprocess

from os import path



def upload_exploit(repository,target):

	if path.exists('pentesting_files'):


		subprocess.run(['git','clone',repository], stdout=None) #Downloading exploit

		exploit = repository[repository.rfind("/")+1:] #Obtaining exploit folder name

		subprocess.run(['sudo','cp','-r',exploit,'pentesting_files/exploits'], stdout=None) #Moving exploit to the exploits folder

		subprocess.run(['scp','-r',exploit,target+':'+'~'], stdout=None) #Uploading exploit to the target

		subprocess.run(['ssh',target], stdout=None) #Connects to the target, letting the user to execute the exploit

	else:

		print('\nYou need to create the pentshelp folders first in order to save the exploit in the exploits folder')


upload_exploit('https://github.com/ashueep/SMB-Exploit','localhost')
